<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jamie's Weather App</title>
    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for the Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /*
         * This ensures the HTML and body tags take up the full viewport,
         * allowing the content to scale and use the entire screen.
         */
        html, body {
            height: 100%;
        }

        body {
            font-family: 'Inter', sans-serif;
            /* Using the provided image as the background */
            background-image: url('https://static.vecteezy.com/system/resources/previews/009/362/398/original/blue-dynamic-shape-abstract-background-suitable-for-web-and-mobile-app-backgrounds-eps-10-vector.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed; /* Ensures the background doesn't scroll with content */
            
            /* Using flexbox to center content vertically and horizontally */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            box-sizing: border-box; /* Ensures padding doesn't cause overflow */
            overflow-y: auto; /* Adds vertical scrolling if content is too tall */
        }
        
        .app-container {
            width: 100%;
            max-width: 800px;
            background-color: white;
            border-radius: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 2.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        @media (min-width: 768px) {
            .app-container {
                padding: 4rem;
            }
        }
    </style>
</head>
<body>

    <!-- Main App Container -->
    <div class="app-container">

        <!-- Header and Search Bar -->
        <header class="w-full flex flex-col items-center gap-6">
            <div class="w-full flex justify-between items-center">
                <!-- Changed text color to dark blue to be visible on the white card -->
                <h1 class="text-3xl sm:text-4xl font-bold text-blue-800">Jamie's Weather</h1>
            </div>
            
            <div class="w-full flex flex-col sm:flex-row gap-4 sm:gap-2">
                <input type="text" id="city-input" placeholder="e.g., San Francisco, Paris"
                       class="flex-1 p-4 text-lg border border-gray-300 rounded-full focus:outline-none focus:ring-4 focus:ring-blue-300 transition-shadow duration-300">
                <button id="get-weather-btn"
                        class="p-4 text-lg bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300">
                    Get Weather
                </button>
            </div>
        </header>

        <!-- Loading Spinner -->
        <div id="loading-spinner" class="hidden text-center">
            <svg class="animate-spin h-10 w-10 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        </div>

        <!-- Weather Display Card -->
        <div id="weather-display" class="w-full text-center">
            <p class="text-gray-500 italic text-lg">Enter a city name to see the current conditions.</p>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cityInput = document.getElementById('city-input');
            const getWeatherBtn = document.getElementById('get-weather-btn');
            const loadingSpinner = document.getElementById('loading-spinner');
            const weatherDisplay = document.getElementById('weather-display');

            // WMO Weather interpretation codes for icons and descriptions
            const WMO_CODES = {
                0: { desc: "Clear sky", icon: "‚òÄÔ∏è" },
                1: { desc: "Mainly clear", icon: "üå§Ô∏è" },
                2: { desc: "Partly cloudy", icon: "‚õÖ" },
                3: { desc: "Overcast", icon: "‚òÅÔ∏è" },
                45: { desc: "Fog", icon: "ÔøΩÔ∏è" },
                48: { desc: "Depositing rime fog", icon: "üå´Ô∏è" },
                51: { desc: "Light Drizzle", icon: "üå¶Ô∏è" },
                53: { desc: "Moderate Drizzle", icon: "üåßÔ∏è" },
                55: { desc: "Dense Drizzle", icon: "üåßÔ∏è" },
                56: { desc: "Light Freezing Drizzle", icon: "üåßÔ∏è‚ùÑÔ∏è" },
                57: { desc: "Dense Freezing Drizzle", icon: "üåßÔ∏è‚ùÑÔ∏è" },
                61: { desc: "Slight Rain", icon: "üåßÔ∏è" },
                63: { desc: "Moderate Rain", icon: "üåßÔ∏è" },
                65: { desc: "Heavy Rain", icon: "üåßÔ∏è" },
                66: { desc: "Light Freezing Rain", icon: "üåßÔ∏è‚ùÑÔ∏è" },
                67: { desc: "Heavy Freezing Rain", icon: "üåßÔ∏è‚ùÑÔ∏è" },
                71: { desc: "Slight Snow fall", icon: "üå®Ô∏è" },
                73: { desc: "Moderate Snow fall", icon: "üå®Ô∏è" },
                75: { desc: "Heavy Snow fall", icon: "üå®Ô∏è" },
                77: { desc: "Snow grains", icon: "‚ùÑÔ∏è" },
                80: { desc: "Slight Rain Showers", icon: "üå¶Ô∏è" },
                81: { desc: "Moderate Rain Showers", icon: "üåßÔ∏è" },
                82: { desc: "Violent Rain Showers", icon: "üåßÔ∏è" },
                85: { desc: "Slight Snow Showers", icon: "üå®Ô∏è" },
                86: { desc: "Heavy Snow Showers", icon: "üå®Ô∏è" },
                95: { desc: "Thunderstorm", icon: "‚õàÔ∏è" },
                96: { desc: "Thunderstorm with slight hail", icon: "‚õàÔ∏è" },
                99: { desc: "Thunderstorm with heavy hail", icon: "‚õàÔ∏è" }
            };

            const getCoordinates = async (cityName) => {
                const geoApiUrl = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(cityName)}&count=1`;
                const response = await fetch(geoApiUrl);
                const data = await response.json();
                if (data.results && data.results.length > 0) {
                    return {
                        latitude: data.results[0].latitude,
                        longitude: data.results[0].longitude,
                        name: data.results[0].name
                    };
                }
                return null;
            };

            const getWeatherData = async (lat, lon) => {
                const weatherApiUrl = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code,wind_speed_10m,relative_humidity_2m,uv_index,precipitation_probability,apparent_temperature,is_day&forecast_days=1&timezone=auto`;
                const response = await fetch(weatherApiUrl);
                const data = await response.json();
                return data;
            };

            const displayWeather = async () => {
                const cityName = cityInput.value.trim();
                if (cityName === "") {
                    weatherDisplay.innerHTML = `<p class="text-red-500 text-lg">Please enter a city name.</p>`;
                    return;
                }

                loadingSpinner.classList.remove('hidden');
                weatherDisplay.innerHTML = ""; // Clear previous content

                try {
                    const coords = await getCoordinates(cityName);
                    if (!coords) {
                        weatherDisplay.innerHTML = `<p class="text-red-500 text-lg">Sorry, could not find that city. Please try a different name.</p>`;
                        return;
                    }

                    const weather = await getWeatherData(coords.latitude, coords.longitude);
                    const current = weather.current;
                    const weatherInfo = WMO_CODES[current.weather_code] || { desc: "Unknown", icon: "‚ùì" };

                    const content = `
                        <div class="w-full flex flex-col items-center gap-6">
                            <h2 class="text-4xl sm:text-5xl font-bold text-gray-800">${coords.name}</h2>
                            <div class="flex items-center gap-6">
                                <div class="text-7xl sm:text-8xl">${weatherInfo.icon}</div>
                                <div class="text-6xl sm:text-7xl font-extrabold text-blue-600">${Math.round(current.temperature_2m)}¬∞C</div>
                            </div>
                            <p class="text-2xl font-semibold text-gray-700">${weatherInfo.desc}</p>
                            <div class="w-full grid grid-cols-2 md:grid-cols-4 gap-4 text-left">
                                <div class="p-4 rounded-xl bg-gray-100 flex flex-col items-start">
                                    <span class="text-3xl mb-1">üí®</span>
                                    <span class="text-gray-500 text-sm">Wind</span>
                                    <span class="font-semibold">${current.wind_speed_10m} km/h</span>
                                </div>
                                <div class="p-4 rounded-xl bg-gray-100 flex flex-col items-start">
                                    <span class="text-3xl mb-1">üíß</span>
                                    <span class="text-gray-500 text-sm">Humidity</span>
                                    <span class="font-semibold">${current.relative_humidity_2m}%</span>
                                </div>
                                <div class="p-4 rounded-xl bg-gray-100 flex flex-col items-start">
                                    <span class="text-3xl mb-1">üåû</span>
                                    <span class="text-gray-500 text-sm">UV Index</span>
                                    <span class="font-semibold">${Math.round(current.uv_index)}</span>
                                </div>
                                <div class="p-4 rounded-xl bg-gray-100 flex flex-col items-start">
                                    <span class="text-3xl mb-1">‚òî</span>
                                    <span class="text-gray-500 text-sm">Precipitation</span>
                                    <span class="font-semibold">${Math.round(current.precipitation_probability)}%</span>
                                </div>
                            </div>
                        </div>
                    `;
                    weatherDisplay.innerHTML = content;

                } catch (error) {
                    console.error("Error fetching data:", error);
                    weatherDisplay.innerHTML = `<p class="text-red-500 text-lg">There was a network error. Please try again later.</p>`;
                } finally {
                    loadingSpinner.classList.add('hidden');
                }
            };

            getWeatherBtn.addEventListener('click', displayWeather);
            cityInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    displayWeather();
                }
            });
        });
    </script>
</body>
</html>
